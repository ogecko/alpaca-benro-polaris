import{aA as l}from"./index-Bd6lk8z5.js";import{u as _}from"./device-Cat4i7bx.js";const t=_(),p=l("config",{state:()=>({fetchedAt:0,isSaving:!1,isRestoring:!1,isRestartRequired:!1,polaris_auto_retry:!0,polaris_ip_address:"",polaris_port:9090,enable_restapi:!0,enable_socket:!0,enable_discovery:!0,enable_pilot:!0,enable_synscan:!0,alpaca_restapi_port:5555,alpaca_socket_port:5556,alpaca_discovery_port:32227,alpaca_pilot_port:80,stellarium_synscan_port:10001,stellarium_synscan_ip_address:"",alpaca_restapi_ip_address:"",location:"Unknown",site_latitude:-33.8598874,site_longitude:151.2021771,site_elevation:39,site_pressure:1010,default_azimuth:"180",default_altitude:"45",focal_length:800,focal_ratio:11,verbose_driver_exceptions:!0,advanced_kf:!1,advanced_control:!1,advanced_slewing:!1,advanced_tracking:!1,advanced_goto:!1,advanced_rotator:!1,advanced_guiding:!1,advanced_alignment:!1,tracking_settle_time:16,kf_process_noise:[1e-5,1e-5,1e-5,1e-4,1e-4,1e-4],kf_measure_noise:[1e-5,1e-5,1e-5,1e-4,1e-4,1e-4],pid_Kp:[.8,.8,.8],pid_Ki:[0,0,0],pid_Kd:[.8,.8,.8],pid_Ke:.4,pid_Kc:1,pid_Kv:0,pid_Ka:0,z1_min_limit:-190,z1_max_limit:190,z2_min_limit:-32,z2_max_limit:40,z3_min_limit:-190,z3_max_limit:190,m1_park:0,m2_park:0,m3_park:0,guide_rate_ra:.5,guide_rate_dec:.5,aiming_adjustment_enabled:!0,aiming_adjustment_time:2,aiming_adjustment_az:-.0300750663,aiming_adjustment_alt:.0195474932,aim_max_error_correction:.5,log_level:"INFO",log_to_file:!0,log_to_stdout:!0,log_performance_data:0,log_performance_data_test:0,log_perf_speed_interval:5,log_polaris:!0,log_stellarium_protocol:!1,supress_polaris_frequent_msgs:!0,supress_alpaca_polling_msgs:!0,supress_stellarium_polling_msgs:!0,log_alpaca_protocol:!1,log_alpaca_polling:!1,log_alpaca_discovery:!1,log_alpaca_actions:!1,log_pulse_guiding:!1,log_rotator_protocol:!1,log_synscan_protocol:!1,log_synscan_polling:!1,log_polaris_ble:!1,log_polaris_protocol:!1,log_polaris_polling:!1,log_quest_model:!1,log_telemetry_data:!1,log_aiming_data:!1,log_drift_data:!1,log_periodic_data:!1,log_kalman_data:!1,log_pid_data:!1,log_sync_data:!1,max_size_mb:5,num_keep_logs:5}),actions:{async configFetch(e=[]){try{const s=`{"configNames": [${e.map(i=>`"${i}"`).join(",")}]}`,o=await t.apiAction("Polaris:ConfigFetch",s);this.$patch(o),this.fetchedAt=Date.now()}catch(a){console.warn("Config fetch failed:",a)}},async configUpdate(e){try{const a=await t.apiAction("Polaris:ConfigUpdate",e);this.$patch(a),console.log("configUpdate",a),(Object.prototype.hasOwnProperty.call(a,"advanced_control")||Object.prototype.hasOwnProperty.call(a,"advanced_rotator"))&&await t.fetchConfiguredDevices();const s=["polaris_auto_retry","enable_restapi","enable_socket","enable_discovery","enable_pilot","enable_synscan","alpaca_restapi_port","alpaca_socket_port","alpaca_discovery_port","alpaca_pilot_port","stellarium_synscan_port"],o=Object.keys(a);o.some(r=>s.includes(r))&&(this.isRestartRequired=!0,console.info(`ABP Driver Restart required due to: ${o.join(", ")}`))}catch(a){const s=Object.keys(e).join(", ");console.warn(`Failed to update ${s}:`,a)}},async configSave(){this.isSaving=!0;try{return await t.apiAction("Polaris:ConfigSave"),this.isRestartRequired&&(this.isRestartRequired=!1,await t.apiAction("Polaris:RestartDriver")),!0}catch(e){return console.warn("Config Save failed:",e),!1}finally{this.isSaving=!1}},async configRestore(){this.isRestoring=!0;try{const e=await t.apiAction("Polaris:ConfigRestore");return this.$patch(e),this.fetchedAt=Date.now(),!0}catch(e){return console.warn("Config restore failed:",e),!1}finally{this.isRestoring=!1}}}});export{p as u};
