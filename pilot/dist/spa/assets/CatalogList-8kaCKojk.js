import{Q as ce}from"./QSpace-Du2p97l0.js";import{e as me,aH as fe,i as ge,c as m,a as Y,w as E,aI as te,aJ as pe,az as ve,h as T,Q as P,O as q,H as g,d as oe,E as w,a3 as ye,F as u,I as n,N as p,P as v,q as be,z as _e,D as xe,J as k,K as $,M as i,R as le,T as Ce,S as ke,C as Se,_ as ae}from"./index-CEv9_qj_.js";import{Q as Ve}from"./QInput-2-P9Oegg.js";import{u as he,a as Pe}from"./use-dark-BQltrje4.js";import{b as qe}from"./format-BvkBI9bc.js";import{Q as X,a as F}from"./QItem-D8fsXvyo.js";import{Q as B}from"./QItemLabel-B5bdBf4W.js";import{Q as K}from"./QChip-BSTeWNJy.js";import{Q as ne}from"./QTooltip-C6ijQtQR.js";import{Q as we}from"./QList-dCTaWmT9.js";import{Q as ze}from"./QCard-n61u37GQ.js";import{Q as $e}from"./QPage-8lobNEH0.js";import{_ as Fe}from"./StatusBanners.vue_vue_type_script_setup_true_lang-SrpOnnMd.js";import{c as ie}from"./angles-gRV9FYwb.js";import{a as W}from"./scale-MATHP_kN.js";import{u as Ae}from"./use-quasar-0zCFCQXI.js";import{u as Be}from"./device-Yums5FfU.js";import{u as De}from"./status-DDwKt7M3.js";import{u as Ne}from"./catalog-yTu03T_-.js";import{_ as Qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as Ie}from"./QSelect-BxDUNU0D.js";import"./use-key-composition-DjqOyzN-.js";import"./focus-manager-BiGVPCjV.js";import"./position-engine-DFnuPb8F.js";import"./selection-fK-mpxfo.js";import"./scroll-1XtJtJtc.js";import"./use-model-toggle-CUFmjS44.js";import"./use-timeout-Dbax10CM.js";import"./config-C00Vk_Nl.js";import"./QMenu-DYjJ3EIM.js";import"./use-prevent-scroll-BJdy99AR.js";import"./rtl-DFPa-2ov.js";function J(e,t){return[!0,!1].includes(e)?e:t}const Me=me({name:"QPagination",props:{...he,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||fe.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:y}=ge(),{$q:c}=y,S=Pe(e,c),f=m(()=>parseInt(e.min,10)),d=m(()=>parseInt(e.max,10)),x=m(()=>parseInt(e.maxPages,10)),b=m(()=>V.value+" / "+d.value),Q=m(()=>J(e.boundaryLinks,e.input)),z=m(()=>J(e.boundaryNumbers,!e.input)),I=m(()=>J(e.directionLinks,e.input)),M=m(()=>J(e.ellipses,!e.input)),_=Y(null),V=m({get:()=>e.modelValue,set:o=>{if(o=parseInt(o,10),e.disable||isNaN(o))return;const r=qe(o,f.value,d.value);e.modelValue!==r&&t("update:modelValue",r)}});E(()=>`${f.value}|${d.value}`,()=>{V.value=e.modelValue});const H=m(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),D=m(()=>e.gutter in te?`${te[e.gutter]}px`:e.gutter||null),j=m(()=>D.value!==null?`--q-pagination-gutter-parent:-${D.value};--q-pagination-gutter-child:${D.value}`:null),s=m(()=>{const o=[e.iconFirst||c.iconSet.pagination.first,e.iconPrev||c.iconSet.pagination.prev,e.iconNext||c.iconSet.pagination.next,e.iconLast||c.iconSet.pagination.last];return c.lang.rtl===!0?o.reverse():o}),a=m(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),l=m(()=>pe(e,"flat")),G=m(()=>({[l.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),re=m(()=>{const o={[l.value]:!1};return e.activeDesign!==""&&(o[e.activeDesign]=!0),o}),se=m(()=>({...re.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),R=m(()=>{let o=Math.max(x.value,1+(M.value?2:0)+(z.value?2:0));const r={pgFrom:f.value,pgTo:d.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(d.value).length)}em`}};return x.value&&o<d.value-f.value+1&&(o=1+Math.floor(o/2)*2,r.pgFrom=Math.max(f.value,Math.min(d.value-o+1,e.modelValue-Math.floor(o/2))),r.pgTo=Math.min(d.value,r.pgFrom+o-1),z.value&&(r.boundaryStart=!0,r.pgFrom++),M.value&&r.pgFrom>f.value+(z.value?1:0)&&(r.ellipsesStart=!0,r.pgFrom++),z.value&&(r.boundaryEnd=!0,r.pgTo--),M.value&&r.pgTo<d.value-(z.value?1:0)&&(r.ellipsesEnd=!0,r.pgTo--)),r});function Z(o){V.value=o}function ue(o){V.value=V.value+o}const de=m(()=>{function o(){V.value=_.value,_.value=null}return{"onUpdate:modelValue":r=>{_.value=r},onKeyup:r=>{ve(r,13)===!0&&o()},onBlur:o}});function h(o,r,O){const A={"aria-label":r,"aria-current":"false",...G.value,...o};return O===!0&&Object.assign(A,{"aria-current":"true",...se.value}),r!==void 0&&(e.toFn!==void 0?A.to=e.toFn(r):A.onClick=()=>{Z(r)}),T(P,A)}return Object.assign(y,{set:Z,setByOffset:ue}),()=>{const o=[],r=[];let O;if(Q.value===!0&&(o.push(h({key:"bls",disable:e.disable||e.modelValue<=f.value,icon:s.value[0],"aria-label":c.lang.pagination.first},f.value)),r.unshift(h({key:"ble",disable:e.disable||e.modelValue>=d.value,icon:s.value[3],"aria-label":c.lang.pagination.last},d.value))),I.value===!0&&(o.push(h({key:"bdp",disable:e.disable||e.modelValue<=f.value,icon:s.value[1],"aria-label":c.lang.pagination.prev},e.modelValue-1)),r.unshift(h({key:"bdn",disable:e.disable||e.modelValue>=d.value,icon:s.value[2],"aria-label":c.lang.pagination.next},e.modelValue+1))),e.input!==!0){O=[];const{pgFrom:A,pgTo:ee,marginalStyle:L}=R.value;if(R.value.boundaryStart===!0){const C=f.value===e.modelValue;o.push(h({key:"bns",style:L,disable:e.disable,label:f.value},f.value,C))}if(R.value.boundaryEnd===!0){const C=d.value===e.modelValue;r.unshift(h({key:"bne",style:L,disable:e.disable,label:d.value},d.value,C))}R.value.ellipsesStart===!0&&o.push(h({key:"bes",style:L,disable:e.disable,label:"…",ripple:!1},A-1)),R.value.ellipsesEnd===!0&&r.unshift(h({key:"bee",style:L,disable:e.disable,label:"…",ripple:!1},ee+1));for(let C=A;C<=ee;C++)O.push(h({key:`bpg${C}`,style:L,disable:e.disable,label:C},C,C===e.modelValue))}return T("div",{class:H.value,...a.value},[T("div",{class:"q-pagination__content row no-wrap items-center",style:j.value},[...o,e.input===!0?T(Ve,{class:"inline",style:{width:`${b.value.length/1.5}em`},type:"number",dense:!0,value:_.value,disable:e.disable,dark:S.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:b.value,min:f.value,max:d.value,...de.value}):T("div",{class:"q-pagination__middle row justify-center"},O),...r])])}}}),Re={};function Oe(e,t){return g(),q("span",null,"  |  ")}const U=Qe(Re,[["render",Oe]]),N=oe({__name:"MultiSelect",props:{label:{},size:{default:"180px"},color:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(e,{emit:t}){const y=e,c=t,S=Y(y.modelValue??[]);E(()=>y.modelValue,d=>{S.value=d??[]}),E(S,d=>{c("update:modelValue",d)});function f(d){if(y.label=="Altitude"){if(d==0)return"negative";if(d==1)return"warning";if(d==6)return"negative"}return y.color}return(d,x)=>(g(),w(Ie,{label:y.label,dense:"",multiple:"",filled:"","map-options":"",style:ye({width:d.size}),"onUpdate:modelValue":[x[0]||(x[0]=b=>c("update:modelValue",b)),x[1]||(x[1]=b=>S.value=b)],modelValue:S.value,options:y.options},{option:u(b=>[n(X,{dense:"",clickable:"",onClick:Q=>b.toggleOption(b.opt.value)},{default:u(()=>[n(F,null,{default:u(()=>[p(v(b.opt.label),1)]),_:2},1024)]),_:2},1032,["onClick"])]),"selected-item":u(b=>[n(K,{color:f(b.opt.value),class:"text-caption",dense:"",removable:"",onRemove:Q=>b.removeAtIndex(b.index)},{default:u(()=>[p(v(b.opt.label),1)]),_:2},1032,["color","onRemove"])]),_:1},8,["label","style","modelValue","options"]))}}),Le={class:"row q-pb-sm q-col-gutter-md items-center"},Te={class:"col text-h6 q-ml-md"},Ue={class:"text-caption text-grey-6"},Ee={key:1},je={key:0,class:"row q-pb-sm",style:{"background-color":"rgba(255, 255, 255, 0.07)"}},Ge={class:"row q-col-gutter-sm items-stretch"},Je={class:"col-12"},Ke={class:"text-weight-bolder"},He={key:0,class:"text-grey-7"},We={key:0},Xe={key:1},Ye={key:2},Ze={key:3},et={class:"column text-grey-8 q-gutter-xs"},Bt=oe({__name:"CatalogList",setup(e){const t=Ne(),y=Ae(),c=xe(),S=Be(),f=Se(),d=De(),x=Y(!1),b=m(()=>y.screen.gt.sm?9:4),Q=m(()=>z.value?"Nearby Proximity":"Ranking and Size"),z=m(()=>t.sorting[0]?.field==="Proximity");E(()=>c.query.q,s=>{t.searchFor=typeof s=="string"?s.trim():""},{immediate:!0}),E(()=>c.query,V,{deep:!0,flush:"sync"});const I={0:"mdi-horse-variant",1:"mdi-cryengine",2:"mdi-blur",3:"mdi-flare"},M={0:"negative",1:"warning",2:"positive",3:"positive",4:"positive",5:"positive",6:"negative"};function _(s){return typeof s=="string"?s.split(",").map(a=>parseInt(a)).filter(a=>!isNaN(a)):[]}function V(){t.filter.C1=_(c.query.C1),t.filter.C2=_(c.query.C2),t.filter.Cn=_(c.query.Cn),t.filter.Rt=_(c.query.Rt),t.filter.Sz=_(c.query.Sz),t.filter.Vz=_(c.query.Vz),t.filter.Az=_(c.query.Az),t.filter.Alt=_(c.query.Alt),c.query.sort==="Proximity"?(t.updateDsoProximity(d.rightascension,d.declination),t.sorting=[{field:"Proximity",direction:"asc"}]):t.sorting=[]}function H(s){y.notify({message:`Ready to sync or goto ${s.MainID} ${s.Name?s.Name:""}?`,color:"warning",position:"top",timeout:5e3,actions:[{label:"Sync",icon:"mdi-sync",color:"yellow",handler:()=>{D(s)}},{label:"Goto",icon:"mdi-move-resize-variant",color:"yellow",handler:()=>{j(s)}},{label:"Cancel",icon:"mdi-close",color:"white",handler:()=>{}}]})}async function D(s){await S.alpacaJ2000Sync(s.RA_hr,s.Dec_deg);const a=s.Name?.trim()||"";y.notify({message:`Sync issued for ${s.MainID} ${a}.`,icon:I[s.C1],type:"positive",position:"top",timeout:5e3,actions:[{icon:"mdi-close",color:"white"}]}),t.dsoGotoed=s,await f.push({path:"/sync",query:{...c.query,q:t.searchFor}})}async function j(s){await S.alpacaJ2000Goto(s.RA_hr,s.Dec_deg);const a=s.Name?.trim()||"";y.notify({message:`Goto issued for ${s.MainID} ${a}.`,icon:I[s.C1],type:"positive",position:"top",timeout:5e3,actions:[{icon:"mdi-close",color:"white"}]}),t.dsoGotoed=s,await f.push({path:"/dashboard",query:{...c.query,q:t.searchFor}})}return be(async()=>{await t.catalogFetch(),V(),t.startPositionUpdater()}),_e(()=>{t.stopPositionUpdater()}),(s,a)=>(g(),w($e,{class:"q-pa-sm dark-page"},{default:u(()=>[n(Fe),k("div",Le,[k("div",Te,[a[12]||(a[12]=p(" Alpaca Pilot Catalog ",-1)),k("div",Ue," Interactive Catalog of Stellar and Deep-Sky Objects, sorted by "+v(Q.value)+". ",1)]),n(ce),k("div",null,[x.value&&i(t).isFiltered?(g(),w(P,{key:0,dense:"",color:"primary",icon:"mdi-filter-off",label:i(y).screen.gt.sm?"Filters":"",onClick:a[0]||(a[0]=l=>i(t).clearFilter())},null,8,["label"])):(g(),w(P,{key:1,dense:"",icon:"mdi-filter",label:i(y).screen.gt.sm?"Filters":"",onClick:a[1]||(a[1]=l=>x.value=!x.value)},null,8,["label"]))]),k("div",null,[i(y).screen.gt.xs?(g(),w(Me,{key:0,modelValue:i(t).page,"onUpdate:modelValue":a[2]||(a[2]=l=>i(t).page=l),max:i(t).numPages,"max-pages":b.value,"direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},null,8,["modelValue","max","max-pages"])):(g(),q("div",Ee,[n(P,{dense:"",flat:"",color:"primary",icon:"fast_rewind",onClick:a[3]||(a[3]=l=>i(t).page=Math.max(1,i(t).page-1))}),n(P,{dense:"",color:"primary",label:i(t).page,style:{"min-width":"30px"}},null,8,["label"]),n(P,{dense:"",flat:"",color:"primary",icon:"fast_forward",onClick:a[4]||(a[4]=l=>i(t).page=Math.min(i(t).numPages,i(t).page+1))})]))])]),x.value?(g(),q("div",je,[n(N,{label:"Rating",modelValue:i(t).filter.Rt,"onUpdate:modelValue":a[5]||(a[5]=l=>i(t).filter.Rt=l),options:i(t).RtOptions,color:"accent"},null,8,["modelValue","options"]),n(N,{label:"Altitude",modelValue:i(t).filter.Alt,"onUpdate:modelValue":a[6]||(a[6]=l=>i(t).filter.Alt=l),options:i(t).AltOptions,color:"positive"},null,8,["modelValue","options"]),n(N,{label:"Type",modelValue:i(t).filter.C1,"onUpdate:modelValue":a[7]||(a[7]=l=>i(t).filter.C1=l),options:i(t).C1Options,color:"grey-7"},null,8,["modelValue","options"]),n(N,{label:"SubType",modelValue:i(t).filter.C2,"onUpdate:modelValue":a[8]||(a[8]=l=>i(t).filter.C2=l),options:i(t).C2Options,color:"grey-7"},null,8,["modelValue","options"]),n(N,{label:"Size",modelValue:i(t).filter.Sz,"onUpdate:modelValue":a[9]||(a[9]=l=>i(t).filter.Sz=l),options:i(t).SzOptions,color:"primary"},null,8,["modelValue","options"]),n(N,{label:"Brightness",modelValue:i(t).filter.Vz,"onUpdate:modelValue":a[10]||(a[10]=l=>i(t).filter.Vz=l),options:i(t).VzOptions,color:"primary"},null,8,["modelValue","options"])])):$("",!0),a[17]||(a[17]=k("div",{class:"row q-pb-sm q-col-gutter-md items-center"},null,-1)),k("div",Ge,[k("div",Je,[n(ze,{flat:"",bordered:"",class:"col"},{default:u(()=>[n(we,{bordered:"",separator:""},{default:u(()=>[i(t).paginated.length==0?(g(),w(X,{key:0,class:"q-pt-lg q-pb-lg"},{default:u(()=>[n(F,{avatar:""},{default:u(()=>[n(le,{name:"mdi-help"})]),_:1}),n(F,null,{default:u(()=>[n(B,null,{default:u(()=>a[13]||(a[13]=[p("No Results Found",-1)])),_:1,__:[13]}),n(B,{caption:""},{default:u(()=>a[14]||(a[14]=[p("Clear the search and filters to try again",-1)])),_:1,__:[14]})]),_:1}),n(F,{side:""},{default:u(()=>[n(P,{flat:"",dense:"",icon:"mdi-close",label:"Clear",class:"position-right",onClick:a[11]||(a[11]=l=>i(t).clearFilter())})]),_:1})]),_:1})):(g(!0),q(ke,{key:1},Ce(i(t).paginated,l=>(g(),w(X,{clickable:"",key:l.MainID,onClick:G=>H(l)},{default:u(()=>[n(F,{avatar:""},{default:u(()=>[n(le,{name:I[l.C1]},null,8,["name"])]),_:2},1024),n(F,{top:""},{default:u(()=>[n(B,null,{default:u(()=>[k("span",Ke,v(l.MainID),1),l.OtherIDs?(g(),q("span",He,"   |   "+v(l.OtherIDs),1)):$("",!0)]),_:2},1024),n(B,{overline:""},{default:u(()=>[p(v(l.Name),1)]),_:2},1024),n(B,{caption:"",class:"text-grey-6"},{default:u(()=>[p(v(l.Subtype)+" in "+v(l.Constellation)+". "+v(l.Notes),1)]),_:2},1024),n(B,{caption:"",class:"text-grey-6"},{default:u(()=>[l.Class?(g(),q("span",We,[p("Class: "+v(l.Class),1),n(U)])):$("",!0),p(" RA: "+v(i(ie)(l.RA_hr,1,"hr"))+" ",1),n(U),p(" Dec: "+v(i(ie)(l.Dec_deg))+" ",1),l.Az_deg?(g(),q("span",Xe,[n(U),p(" Az: "+v(i(W)(l.Az_deg,"deg",0)),1)])):$("",!0),l.Alt_deg?(g(),q("span",Ye,[n(U),p(" Altitude: "+v(i(W)(l.Alt_deg,"deg",0)),1)])):$("",!0),z.value?(g(),q("span",Ze,[n(U),p(" Proximity: "+v(i(W)(l.Proximity??0,"deg",1)),1)])):$("",!0)]),_:2},1024)]),_:2},1024),n(F,{top:"",side:"",class:"q-gutter-xs"},{default:u(()=>[n(B,{caption:""}),n(K,{dense:"",color:"accent",class:"text-caption"},{default:u(()=>[p(v(l.Rating),1)]),_:2},1024),l.Vz==7&&l.Sz==8?$("",!0):(g(),w(K,{key:0,dense:"",color:"primary",class:"text-caption"},{default:u(()=>[p(v(l.Visibility),1)]),_:2},1024)),l.Position?(g(),w(K,{key:1,dense:"",color:M[l.Alt??2],class:"text-caption"},{default:u(()=>[p(v(l.Position),1)]),_:2},1032,["color"])):$("",!0)]),_:2},1024),n(F,{side:"",class:"q-gutter-xs"},{default:u(()=>[k("div",et,[n(P,{class:"gt-xs",flat:"",dense:"",icon:"mdi-move-resize-variant",onClick:ae(G=>j(l),["stop"])},{default:u(()=>[n(ne,null,{default:u(()=>a[15]||(a[15]=[p("Goto",-1)])),_:1,__:[15]})]),_:2},1032,["onClick"]),n(P,{class:"gt-xs",flat:"",dense:"",icon:"mdi-sync",onClick:ae(G=>D(l),["stop"])},{default:u(()=>[n(ne,null,{default:u(()=>a[16]||(a[16]=[p("Sync",-1)])),_:1,__:[16]})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])])]),_:1,__:[17]}))}});export{Bt as default};
