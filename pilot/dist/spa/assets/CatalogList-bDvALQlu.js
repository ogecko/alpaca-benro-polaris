import{Q as ce}from"./QSpace-PKGevyI_.js";import{e as me,aE as fe,i as pe,c as m,a as H,w as L,aF as Y,aG as ge,aw as ve,h as T,Q as h,d as ne,E as w,H as v,a3 as ye,F as s,I as n,N as y,P as b,O as P,q as be,z as Ce,D as _e,J as k,K as B,M as i,R as Z,T as ke,S as xe,C as Se,_ as ee}from"./index-czUYoKoi.js";import{Q as Ve}from"./QInput-DAgdV14D.js";import{u as qe,a as he}from"./use-dark-P7KIkx42.js";import{b as we}from"./format-BvkBI9bc.js";import{Q as K,a as F}from"./QItem-0kfMxV0x.js";import{Q as D}from"./QItemLabel-DFzFiUme.js";import{Q as G}from"./QChip-CAMRUd09.js";import{Q as te}from"./QTooltip-CrAmWoT0.js";import{Q as Pe}from"./QList-D_7_muqa.js";import{Q as Fe}from"./QCard-JtAeCRES.js";import{Q as $e}from"./QPage-DT5uZUA-.js";import{_ as Ae}from"./StatusBanners.vue_vue_type_script_setup_true_lang-AaorwvWa.js";import{c as le}from"./angles-CM-dTGcw.js";import{u as ze}from"./catalog-B8cp5Slu.js";import{Q as Be}from"./QSelect-D57SO3hy.js";import{u as De}from"./use-quasar-C_dZaDjE.js";import{u as Ne}from"./device-CBd1NEAG.js";import{_ as Qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ae}from"./scale-BUHoRS_z.js";import"./use-key-composition-CHEtNdfV.js";import"./focus-manager-BFhRSJxH.js";import"./position-engine-CM2bfKFz.js";import"./selection-jC7aCOuj.js";import"./use-model-toggle-DkUlaMca.js";import"./use-timeout-gEiGojfv.js";import"./QBanner-C9-dHvy_.js";import"./status-BqoJPY4U.js";import"./config-BzivkgyD.js";import"./QMenu-BZAKKC3w.js";import"./use-prevent-scroll-D_JN3c-5.js";import"./rtl-DFPa-2ov.js";function E(e,t){return[!0,!1].includes(e)?e:t}const Ie=me({name:"QPagination",props:{...qe,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||fe.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:g}=pe(),{$q:c}=g,x=he(e,c),p=m(()=>parseInt(e.min,10)),u=m(()=>parseInt(e.max,10)),S=m(()=>parseInt(e.maxPages,10)),f=m(()=>V.value+" / "+u.value),Q=m(()=>E(e.boundaryLinks,e.input)),C=m(()=>E(e.boundaryNumbers,!e.input)),U=m(()=>E(e.directionLinks,e.input)),I=m(()=>E(e.ellipses,!e.input)),$=H(null),V=m({get:()=>e.modelValue,set:o=>{if(o=parseInt(o,10),e.disable||isNaN(o))return;const r=we(o,p.value,u.value);e.modelValue!==r&&t("update:modelValue",r)}});L(()=>`${p.value}|${u.value}`,()=>{V.value=e.modelValue});const d=m(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),a=m(()=>e.gutter in Y?`${Y[e.gutter]}px`:e.gutter||null),l=m(()=>a.value!==null?`--q-pagination-gutter-parent:-${a.value};--q-pagination-gutter-child:${a.value}`:null),A=m(()=>{const o=[e.iconFirst||c.iconSet.pagination.first,e.iconPrev||c.iconSet.pagination.prev,e.iconNext||c.iconSet.pagination.next,e.iconLast||c.iconSet.pagination.last];return c.lang.rtl===!0?o.reverse():o}),ie=m(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),J=m(()=>ge(e,"flat")),oe=m(()=>({[J.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),re=m(()=>{const o={[J.value]:!1};return e.activeDesign!==""&&(o[e.activeDesign]=!0),o}),ue=m(()=>({...re.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),M=m(()=>{let o=Math.max(S.value,1+(I.value?2:0)+(C.value?2:0));const r={pgFrom:p.value,pgTo:u.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(u.value).length)}em`}};return S.value&&o<u.value-p.value+1&&(o=1+Math.floor(o/2)*2,r.pgFrom=Math.max(p.value,Math.min(u.value-o+1,e.modelValue-Math.floor(o/2))),r.pgTo=Math.min(u.value,r.pgFrom+o-1),C.value&&(r.boundaryStart=!0,r.pgFrom++),I.value&&r.pgFrom>p.value+(C.value?1:0)&&(r.ellipsesStart=!0,r.pgFrom++),C.value&&(r.boundaryEnd=!0,r.pgTo--),I.value&&r.pgTo<u.value-(C.value?1:0)&&(r.ellipsesEnd=!0,r.pgTo--)),r});function W(o){V.value=o}function se(o){V.value=V.value+o}const de=m(()=>{function o(){V.value=$.value,$.value=null}return{"onUpdate:modelValue":r=>{$.value=r},onKeyup:r=>{ve(r,13)===!0&&o()},onBlur:o}});function q(o,r,R){const z={"aria-label":r,"aria-current":"false",...oe.value,...o};return R===!0&&Object.assign(z,{"aria-current":"true",...ue.value}),r!==void 0&&(e.toFn!==void 0?z.to=e.toFn(r):z.onClick=()=>{W(r)}),T(h,z)}return Object.assign(g,{set:W,setByOffset:se}),()=>{const o=[],r=[];let R;if(Q.value===!0&&(o.push(q({key:"bls",disable:e.disable||e.modelValue<=p.value,icon:A.value[0],"aria-label":c.lang.pagination.first},p.value)),r.unshift(q({key:"ble",disable:e.disable||e.modelValue>=u.value,icon:A.value[3],"aria-label":c.lang.pagination.last},u.value))),U.value===!0&&(o.push(q({key:"bdp",disable:e.disable||e.modelValue<=p.value,icon:A.value[1],"aria-label":c.lang.pagination.prev},e.modelValue-1)),r.unshift(q({key:"bdn",disable:e.disable||e.modelValue>=u.value,icon:A.value[2],"aria-label":c.lang.pagination.next},e.modelValue+1))),e.input!==!0){R=[];const{pgFrom:z,pgTo:X,marginalStyle:O}=M.value;if(M.value.boundaryStart===!0){const _=p.value===e.modelValue;o.push(q({key:"bns",style:O,disable:e.disable,label:p.value},p.value,_))}if(M.value.boundaryEnd===!0){const _=u.value===e.modelValue;r.unshift(q({key:"bne",style:O,disable:e.disable,label:u.value},u.value,_))}M.value.ellipsesStart===!0&&o.push(q({key:"bes",style:O,disable:e.disable,label:"…",ripple:!1},z-1)),M.value.ellipsesEnd===!0&&r.unshift(q({key:"bee",style:O,disable:e.disable,label:"…",ripple:!1},X+1));for(let _=z;_<=X;_++)R.push(q({key:`bpg${_}`,style:O,disable:e.disable,label:_},_,_===e.modelValue))}return T("div",{class:d.value,...ie.value},[T("div",{class:"q-pagination__content row no-wrap items-center",style:l.value},[...o,e.input===!0?T(Ve,{class:"inline",style:{width:`${f.value.length/1.5}em`},type:"number",dense:!0,value:$.value,disable:e.disable,dark:x.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:f.value,min:p.value,max:u.value,...de.value}):T("div",{class:"q-pagination__middle row justify-center"},R),...r])])}}}),N=ne({__name:"MultiSelect",props:{label:{},size:{default:"180px"},color:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(e,{emit:t}){const g=e,c=t,x=H(g.modelValue??[]);L(()=>g.modelValue,u=>{x.value=u??[]}),L(x,u=>{c("update:modelValue",u)});function p(u){if(g.label=="Altitude"){if(u==0)return"negative";if(u==1)return"warning";if(u==6)return"negative"}return g.color}return(u,S)=>(v(),w(Be,{label:g.label,dense:"",multiple:"",filled:"","map-options":"",style:ye({width:u.size}),"onUpdate:modelValue":[S[0]||(S[0]=f=>c("update:modelValue",f)),S[1]||(S[1]=f=>x.value=f)],modelValue:x.value,options:g.options},{option:s(f=>[n(K,{dense:"",clickable:"",onClick:Q=>f.toggleOption(f.opt.value)},{default:s(()=>[n(F,null,{default:s(()=>[y(b(f.opt.label),1)]),_:2},1024)]),_:2},1032,["onClick"])]),"selected-item":s(f=>[n(G,{color:p(f.opt.value),class:"text-caption",dense:"",removable:"",onRemove:Q=>f.removeAtIndex(f.index)},{default:s(()=>[y(b(f.opt.label),1)]),_:2},1032,["color","onRemove"])]),_:1},8,["label","style","modelValue","options"]))}}),Me={};function Re(e,t){return v(),P("span",null,"  |  ")}const j=Qe(Me,[["render",Re]]),Oe={class:"row q-pb-sm q-col-gutter-md items-center"},Te={key:1},Le={key:0,class:"row q-pb-sm",style:{"background-color":"rgba(255, 255, 255, 0.07)"}},Ue={class:"row q-col-gutter-sm items-stretch"},Ee={class:"col-12"},je={class:"text-weight-bolder"},Ge={key:0,class:"text-grey-7"},Ke={key:0},He={key:1},Je={key:2},We={class:"column text-grey-8 q-gutter-xs"},Ft=ne({__name:"CatalogList",setup(e){const t=ze(),g=De(),c=_e(),x=Ne(),p=Se(),u=H(!1),S=m(()=>g.screen.gt.sm?9:4);L(()=>c.query.q,d=>{t.searchFor=typeof d=="string"?d.trim():""},{immediate:!0}),L(()=>c.query,U,{deep:!0});const f={0:"mdi-horse-variant",1:"mdi-cryengine",2:"mdi-blur",3:"mdi-flare"},Q={0:"negative",1:"warning",2:"positive",3:"positive",4:"positive",5:"positive",6:"negative"};function C(d){return typeof d=="string"?d.split(",").map(a=>parseInt(a)).filter(a=>!isNaN(a)):[]}function U(){t.filter.C1=C(c.query.C1),t.filter.C2=C(c.query.C2),t.filter.Cn=C(c.query.Cn),t.filter.Rt=C(c.query.Rt),t.filter.Sz=C(c.query.Sz),t.filter.Vz=C(c.query.Vz),t.filter.Az=C(c.query.Az),t.filter.Alt=C(c.query.Alt)}function I(d){g.notify({message:`Ready to sync or goto ${d.MainID} ${d.Name?d.Name:""}?`,color:"warning",position:"top",timeout:5e3,actions:[{label:"Sync",icon:"mdi-sync",color:"yellow",handler:()=>{$(d)}},{label:"Goto",icon:"mdi-move-resize-variant",color:"yellow",handler:()=>{V(d)}},{label:"Cancel",icon:"mdi-close",color:"white",handler:()=>{}}]})}async function $(d){await x.alpacaSyncToRADec(d.RA_hr,d.Dec_deg),g.notify({message:`Sync issued for ${d.MainID} ${d.Name}.`,icon:f[d.C1],type:"positive",position:"top",timeout:5e3,actions:[{icon:"mdi-close",color:"white"}]}),t.dsoGotoed=d,await p.push({path:"/sync",query:{...c.query,q:t.searchFor}})}async function V(d){await x.alpacaSlewToCoord(d.RA_hr,d.Dec_deg),g.notify({message:`Goto issued for ${d.MainID} ${d.Name}.`,icon:f[d.C1],type:"positive",position:"top",timeout:5e3,actions:[{icon:"mdi-close",color:"white"}]}),t.dsoGotoed=d,await p.push({path:"/",query:{...c.query,q:t.searchFor}})}return be(async()=>{await t.catalogFetch(),U(),t.startPositionUpdater()}),Ce(()=>{t.stopPositionUpdater()}),(d,a)=>(v(),w($e,{class:"q-pa-sm dark-page"},{default:s(()=>[n(Ae),k("div",Oe,[a[12]||(a[12]=k("div",{class:"col text-h6 q-ml-md"},[y(" Alpaca Pilot Catalog "),k("div",{class:"text-caption text-grey-6"}," Interactive Catalog of Stellar and Deep-Sky Objects. ")],-1)),n(ce),k("div",null,[u.value&&i(t).isFiltered?(v(),w(h,{key:0,dense:"",color:"primary",icon:"mdi-filter-off",label:i(g).screen.gt.sm?"Filters":"",onClick:a[0]||(a[0]=l=>i(t).clearFilter())},null,8,["label"])):(v(),w(h,{key:1,dense:"",icon:"mdi-filter",label:i(g).screen.gt.sm?"Filters":"",onClick:a[1]||(a[1]=l=>u.value=!u.value)},null,8,["label"]))]),k("div",null,[i(g).screen.gt.xs?(v(),w(Ie,{key:0,modelValue:i(t).page,"onUpdate:modelValue":a[2]||(a[2]=l=>i(t).page=l),max:i(t).numPages,"max-pages":S.value,"direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},null,8,["modelValue","max","max-pages"])):(v(),P("div",Te,[n(h,{dense:"",flat:"",color:"primary",icon:"fast_rewind",onClick:a[3]||(a[3]=l=>i(t).page=Math.max(1,i(t).page-1))}),n(h,{dense:"",color:"primary",label:i(t).page,style:{"min-width":"30px"}},null,8,["label"]),n(h,{dense:"",flat:"",color:"primary",icon:"fast_forward",onClick:a[4]||(a[4]=l=>i(t).page=Math.min(i(t).numPages,i(t).page+1))})]))])]),u.value?(v(),P("div",Le,[n(N,{label:"Rating",modelValue:i(t).filter.Rt,"onUpdate:modelValue":a[5]||(a[5]=l=>i(t).filter.Rt=l),options:i(t).RtOptions,color:"accent"},null,8,["modelValue","options"]),n(N,{label:"Altitude",modelValue:i(t).filter.Alt,"onUpdate:modelValue":a[6]||(a[6]=l=>i(t).filter.Alt=l),options:i(t).AltOptions,color:"positive"},null,8,["modelValue","options"]),n(N,{label:"Type",modelValue:i(t).filter.C1,"onUpdate:modelValue":a[7]||(a[7]=l=>i(t).filter.C1=l),options:i(t).C1Options,color:"grey-7"},null,8,["modelValue","options"]),n(N,{label:"SubType",modelValue:i(t).filter.C2,"onUpdate:modelValue":a[8]||(a[8]=l=>i(t).filter.C2=l),options:i(t).C2Options,color:"grey-7"},null,8,["modelValue","options"]),n(N,{label:"Size",modelValue:i(t).filter.Sz,"onUpdate:modelValue":a[9]||(a[9]=l=>i(t).filter.Sz=l),options:i(t).SzOptions,color:"primary"},null,8,["modelValue","options"]),n(N,{label:"Brightness",modelValue:i(t).filter.Vz,"onUpdate:modelValue":a[10]||(a[10]=l=>i(t).filter.Vz=l),options:i(t).VzOptions,color:"primary"},null,8,["modelValue","options"])])):B("",!0),a[17]||(a[17]=k("div",{class:"row q-pb-sm q-col-gutter-md items-center"},null,-1)),k("div",Ue,[k("div",Ee,[n(Fe,{flat:"",bordered:"",class:"col"},{default:s(()=>[n(Pe,{bordered:"",separator:""},{default:s(()=>[i(t).paginated.length==0?(v(),w(K,{key:0,class:"q-pt-lg q-pb-lg"},{default:s(()=>[n(F,{avatar:""},{default:s(()=>[n(Z,{name:"mdi-help"})]),_:1}),n(F,null,{default:s(()=>[n(D,null,{default:s(()=>a[13]||(a[13]=[y("No Results Found",-1)])),_:1,__:[13]}),n(D,{caption:""},{default:s(()=>a[14]||(a[14]=[y("Clear the search and filters to try again",-1)])),_:1,__:[14]})]),_:1}),n(F,{side:""},{default:s(()=>[n(h,{flat:"",dense:"",icon:"mdi-close",label:"Clear",class:"position-right",onClick:a[11]||(a[11]=l=>i(t).clearFilter())})]),_:1})]),_:1})):(v(!0),P(xe,{key:1},ke(i(t).paginated,l=>(v(),w(K,{clickable:"",key:l.MainID,onClick:A=>I(l)},{default:s(()=>[n(F,{avatar:""},{default:s(()=>[n(Z,{name:f[l.C1]},null,8,["name"])]),_:2},1024),n(F,{top:""},{default:s(()=>[n(D,null,{default:s(()=>[k("span",je,b(l.MainID),1),l.OtherIDs?(v(),P("span",Ge,"   |   "+b(l.OtherIDs),1)):B("",!0)]),_:2},1024),n(D,{overline:""},{default:s(()=>[y(b(l.Name),1)]),_:2},1024),n(D,{caption:"",class:"text-grey-6"},{default:s(()=>[y(b(l.Subtype)+" in "+b(l.Constellation)+". "+b(l.Notes),1)]),_:2},1024),n(D,{caption:"",class:"text-grey-6"},{default:s(()=>[l.Class?(v(),P("span",Ke,[y("Class: "+b(l.Class),1),n(j)])):B("",!0),y(" RA: "+b(i(le)(l.RA_hr,1,"hr"))+" ",1),n(j),y(" Dec: "+b(i(le)(l.Dec_deg))+" ",1),l.Az_deg?(v(),P("span",He,[n(j),y(" Az: "+b(i(ae)(l.Az_deg,"deg",0)),1)])):B("",!0),l.Alt_deg?(v(),P("span",Je,[n(j),y(" Altitude: "+b(i(ae)(l.Alt_deg,"deg",0)),1)])):B("",!0)]),_:2},1024)]),_:2},1024),n(F,{top:"",side:"",class:"q-gutter-xs"},{default:s(()=>[n(D,{caption:""}),n(G,{dense:"",color:"accent",class:"text-caption"},{default:s(()=>[y(b(l.Rating),1)]),_:2},1024),l.Vz==7&&l.Sz==8?B("",!0):(v(),w(G,{key:0,dense:"",color:"primary",class:"text-caption"},{default:s(()=>[y(b(l.Visibility),1)]),_:2},1024)),l.Position?(v(),w(G,{key:1,dense:"",color:Q[l.Alt??2],class:"text-caption"},{default:s(()=>[y(b(l.Position),1)]),_:2},1032,["color"])):B("",!0)]),_:2},1024),n(F,{side:"",class:"q-gutter-xs"},{default:s(()=>[k("div",We,[n(h,{class:"gt-xs",flat:"",dense:"",icon:"mdi-move-resize-variant",onClick:ee(A=>V(l),["stop"])},{default:s(()=>[n(te,null,{default:s(()=>a[15]||(a[15]=[y("Goto",-1)])),_:1,__:[15]})]),_:2},1032,["onClick"]),n(h,{class:"gt-xs",flat:"",dense:"",icon:"mdi-sync",onClick:ee(A=>$(l),["stop"])},{default:s(()=>[n(te,null,{default:s(()=>a[16]||(a[16]=[y("Sync",-1)])),_:1,__:[16]})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])])]),_:1,__:[17]}))}});export{Ft as default};
