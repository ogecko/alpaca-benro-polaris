import{Q as ce}from"./QSpace-hcmkkL3S.js";import{e as me,aF as fe,i as pe,c as m,a as K,w as T,aG as Y,aH as ge,ax as ve,h as L,Q as q,d as ne,E as w,H as v,a3 as ye,F as u,I as n,N as y,P as b,O as P,q as be,z as Ce,D as _e,J as k,K as B,M as i,R as Z,T as ke,S as xe,C as Se,_ as ee}from"./index-CabLL4je.js";import{Q as Ve}from"./QInput-DlLF91f6.js";import{u as he,a as qe}from"./use-dark-DUyNUrlH.js";import{b as we}from"./format-BvkBI9bc.js";import{Q as J,a as F}from"./QItem-BPivmhBT.js";import{Q as D}from"./QItemLabel-BNCLeqRt.js";import{Q as j}from"./QChip-BPiGxopm.js";import{Q as te}from"./QTooltip-CuwuEnOU.js";import{Q as Pe}from"./QList-BtaWtFlk.js";import{Q as Fe}from"./QCard-CZomJhxe.js";import{Q as $e}from"./QPage-BNhwHP3i.js";import{_ as ze}from"./StatusBanners.vue_vue_type_script_setup_true_lang-DdbxGwZD.js";import{c as le}from"./angles-CM-dTGcw.js";import{u as Ae}from"./catalog-JrCFauS0.js";import{Q as Be}from"./QSelect-DkiX7vh8.js";import{u as De}from"./use-quasar-CFGyqKl0.js";import{u as Ne}from"./device-ByMuyERO.js";import{_ as Qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ae}from"./scale-BUHoRS_z.js";import"./use-key-composition-o7PiexN_.js";import"./focus-manager-BFWwTnJR.js";import"./position-engine-mGG91qDE.js";import"./selection-CrbbxkDb.js";import"./use-model-toggle-D0RNB08i.js";import"./use-timeout-CxULoCBv.js";import"./status-35C9ZYtU.js";import"./config-rV9RjvCD.js";import"./QMenu-Dq7dYqf3.js";import"./use-prevent-scroll-BMewW9bI.js";import"./rtl-DFPa-2ov.js";function E(e,t){return[!0,!1].includes(e)?e:t}const Ie=me({name:"QPagination",props:{...he,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||fe.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:g}=pe(),{$q:c}=g,x=qe(e,c),p=m(()=>parseInt(e.min,10)),s=m(()=>parseInt(e.max,10)),S=m(()=>parseInt(e.maxPages,10)),f=m(()=>V.value+" / "+s.value),Q=m(()=>E(e.boundaryLinks,e.input)),C=m(()=>E(e.boundaryNumbers,!e.input)),U=m(()=>E(e.directionLinks,e.input)),I=m(()=>E(e.ellipses,!e.input)),$=K(null),V=m({get:()=>e.modelValue,set:o=>{if(o=parseInt(o,10),e.disable||isNaN(o))return;const r=we(o,p.value,s.value);e.modelValue!==r&&t("update:modelValue",r)}});T(()=>`${p.value}|${s.value}`,()=>{V.value=e.modelValue});const d=m(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),a=m(()=>e.gutter in Y?`${Y[e.gutter]}px`:e.gutter||null),l=m(()=>a.value!==null?`--q-pagination-gutter-parent:-${a.value};--q-pagination-gutter-child:${a.value}`:null),z=m(()=>{const o=[e.iconFirst||c.iconSet.pagination.first,e.iconPrev||c.iconSet.pagination.prev,e.iconNext||c.iconSet.pagination.next,e.iconLast||c.iconSet.pagination.last];return c.lang.rtl===!0?o.reverse():o}),ie=m(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),H=m(()=>ge(e,"flat")),oe=m(()=>({[H.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),re=m(()=>{const o={[H.value]:!1};return e.activeDesign!==""&&(o[e.activeDesign]=!0),o}),se=m(()=>({...re.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),M=m(()=>{let o=Math.max(S.value,1+(I.value?2:0)+(C.value?2:0));const r={pgFrom:p.value,pgTo:s.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(s.value).length)}em`}};return S.value&&o<s.value-p.value+1&&(o=1+Math.floor(o/2)*2,r.pgFrom=Math.max(p.value,Math.min(s.value-o+1,e.modelValue-Math.floor(o/2))),r.pgTo=Math.min(s.value,r.pgFrom+o-1),C.value&&(r.boundaryStart=!0,r.pgFrom++),I.value&&r.pgFrom>p.value+(C.value?1:0)&&(r.ellipsesStart=!0,r.pgFrom++),C.value&&(r.boundaryEnd=!0,r.pgTo--),I.value&&r.pgTo<s.value-(C.value?1:0)&&(r.ellipsesEnd=!0,r.pgTo--)),r});function W(o){V.value=o}function ue(o){V.value=V.value+o}const de=m(()=>{function o(){V.value=$.value,$.value=null}return{"onUpdate:modelValue":r=>{$.value=r},onKeyup:r=>{ve(r,13)===!0&&o()},onBlur:o}});function h(o,r,O){const A={"aria-label":r,"aria-current":"false",...oe.value,...o};return O===!0&&Object.assign(A,{"aria-current":"true",...se.value}),r!==void 0&&(e.toFn!==void 0?A.to=e.toFn(r):A.onClick=()=>{W(r)}),L(q,A)}return Object.assign(g,{set:W,setByOffset:ue}),()=>{const o=[],r=[];let O;if(Q.value===!0&&(o.push(h({key:"bls",disable:e.disable||e.modelValue<=p.value,icon:z.value[0],"aria-label":c.lang.pagination.first},p.value)),r.unshift(h({key:"ble",disable:e.disable||e.modelValue>=s.value,icon:z.value[3],"aria-label":c.lang.pagination.last},s.value))),U.value===!0&&(o.push(h({key:"bdp",disable:e.disable||e.modelValue<=p.value,icon:z.value[1],"aria-label":c.lang.pagination.prev},e.modelValue-1)),r.unshift(h({key:"bdn",disable:e.disable||e.modelValue>=s.value,icon:z.value[2],"aria-label":c.lang.pagination.next},e.modelValue+1))),e.input!==!0){O=[];const{pgFrom:A,pgTo:X,marginalStyle:R}=M.value;if(M.value.boundaryStart===!0){const _=p.value===e.modelValue;o.push(h({key:"bns",style:R,disable:e.disable,label:p.value},p.value,_))}if(M.value.boundaryEnd===!0){const _=s.value===e.modelValue;r.unshift(h({key:"bne",style:R,disable:e.disable,label:s.value},s.value,_))}M.value.ellipsesStart===!0&&o.push(h({key:"bes",style:R,disable:e.disable,label:"…",ripple:!1},A-1)),M.value.ellipsesEnd===!0&&r.unshift(h({key:"bee",style:R,disable:e.disable,label:"…",ripple:!1},X+1));for(let _=A;_<=X;_++)O.push(h({key:`bpg${_}`,style:R,disable:e.disable,label:_},_,_===e.modelValue))}return L("div",{class:d.value,...ie.value},[L("div",{class:"q-pagination__content row no-wrap items-center",style:l.value},[...o,e.input===!0?L(Ve,{class:"inline",style:{width:`${f.value.length/1.5}em`},type:"number",dense:!0,value:$.value,disable:e.disable,dark:x.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:f.value,min:p.value,max:s.value,...de.value}):L("div",{class:"q-pagination__middle row justify-center"},O),...r])])}}}),N=ne({__name:"MultiSelect",props:{label:{},size:{default:"180px"},color:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(e,{emit:t}){const g=e,c=t,x=K(g.modelValue??[]);T(()=>g.modelValue,s=>{x.value=s??[]}),T(x,s=>{c("update:modelValue",s)});function p(s){if(g.label=="Altitude"){if(s==0)return"negative";if(s==1)return"warning";if(s==6)return"negative"}return g.color}return(s,S)=>(v(),w(Be,{label:g.label,dense:"",multiple:"",filled:"","map-options":"",style:ye({width:s.size}),"onUpdate:modelValue":[S[0]||(S[0]=f=>c("update:modelValue",f)),S[1]||(S[1]=f=>x.value=f)],modelValue:x.value,options:g.options},{option:u(f=>[n(J,{dense:"",clickable:"",onClick:Q=>f.toggleOption(f.opt.value)},{default:u(()=>[n(F,null,{default:u(()=>[y(b(f.opt.label),1)]),_:2},1024)]),_:2},1032,["onClick"])]),"selected-item":u(f=>[n(j,{color:p(f.opt.value),class:"text-caption",dense:"",removable:"",onRemove:Q=>f.removeAtIndex(f.index)},{default:u(()=>[y(b(f.opt.label),1)]),_:2},1032,["color","onRemove"])]),_:1},8,["label","style","modelValue","options"]))}}),Me={};function Oe(e,t){return v(),P("span",null,"  |  ")}const G=Qe(Me,[["render",Oe]]),Re={class:"row q-pb-sm q-col-gutter-md items-center"},Le={key:1},Te={key:0,class:"row q-pb-sm",style:{"background-color":"rgba(255, 255, 255, 0.07)"}},Ue={class:"row q-col-gutter-sm items-stretch"},Ee={class:"col-12"},Ge={class:"text-weight-bolder"},je={key:0,class:"text-grey-7"},Je={key:0},Ke={key:1},He={key:2},We={class:"column text-grey-8 q-gutter-xs"},Pt=ne({__name:"CatalogList",setup(e){const t=Ae(),g=De(),c=_e(),x=Ne(),p=Se(),s=K(!1),S=m(()=>g.screen.gt.sm?9:4);T(()=>c.query.q,d=>{t.searchFor=typeof d=="string"?d.trim():""},{immediate:!0}),T(()=>c.query,U,{deep:!0});const f={0:"mdi-horse-variant",1:"mdi-cryengine",2:"mdi-blur",3:"mdi-flare"},Q={0:"negative",1:"warning",2:"positive",3:"positive",4:"positive",5:"positive",6:"negative"};function C(d){return typeof d=="string"?d.split(",").map(a=>parseInt(a)).filter(a=>!isNaN(a)):[]}function U(){t.filter.C1=C(c.query.C1),t.filter.C2=C(c.query.C2),t.filter.Cn=C(c.query.Cn),t.filter.Rt=C(c.query.Rt),t.filter.Sz=C(c.query.Sz),t.filter.Vz=C(c.query.Vz),t.filter.Az=C(c.query.Az),t.filter.Alt=C(c.query.Alt)}function I(d){g.notify({message:`Ready to sync or goto ${d.MainID} ${d.Name?d.Name:""}?`,color:"warning",position:"top",timeout:5e3,actions:[{label:"Sync",icon:"mdi-sync",color:"yellow",handler:()=>{$(d)}},{label:"Goto",icon:"mdi-move-resize-variant",color:"yellow",handler:()=>{V(d)}},{label:"Cancel",icon:"mdi-close",color:"white",handler:()=>{}}]})}async function $(d){await x.alpacaJ2000Sync(d.RA_hr,d.Dec_deg),g.notify({message:`Sync issued for ${d.MainID} ${d.Name}.`,icon:f[d.C1],type:"positive",position:"top",timeout:5e3,actions:[{icon:"mdi-close",color:"white"}]}),t.dsoGotoed=d,await p.push({path:"/sync",query:{...c.query,q:t.searchFor}})}async function V(d){await x.alpacaJ2000Goto(d.RA_hr,d.Dec_deg),g.notify({message:`Goto issued for ${d.MainID} ${d.Name}.`,icon:f[d.C1],type:"positive",position:"top",timeout:5e3,actions:[{icon:"mdi-close",color:"white"}]}),t.dsoGotoed=d,await p.push({path:"/dashboard",query:{...c.query,q:t.searchFor}})}return be(async()=>{await t.catalogFetch(),U(),t.startPositionUpdater()}),Ce(()=>{t.stopPositionUpdater()}),(d,a)=>(v(),w($e,{class:"q-pa-sm dark-page"},{default:u(()=>[n(ze),k("div",Re,[a[12]||(a[12]=k("div",{class:"col text-h6 q-ml-md"},[y(" Alpaca Pilot Catalog "),k("div",{class:"text-caption text-grey-6"}," Interactive Catalog of Stellar and Deep-Sky Objects. ")],-1)),n(ce),k("div",null,[s.value&&i(t).isFiltered?(v(),w(q,{key:0,dense:"",color:"primary",icon:"mdi-filter-off",label:i(g).screen.gt.sm?"Filters":"",onClick:a[0]||(a[0]=l=>i(t).clearFilter())},null,8,["label"])):(v(),w(q,{key:1,dense:"",icon:"mdi-filter",label:i(g).screen.gt.sm?"Filters":"",onClick:a[1]||(a[1]=l=>s.value=!s.value)},null,8,["label"]))]),k("div",null,[i(g).screen.gt.xs?(v(),w(Ie,{key:0,modelValue:i(t).page,"onUpdate:modelValue":a[2]||(a[2]=l=>i(t).page=l),max:i(t).numPages,"max-pages":S.value,"direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},null,8,["modelValue","max","max-pages"])):(v(),P("div",Le,[n(q,{dense:"",flat:"",color:"primary",icon:"fast_rewind",onClick:a[3]||(a[3]=l=>i(t).page=Math.max(1,i(t).page-1))}),n(q,{dense:"",color:"primary",label:i(t).page,style:{"min-width":"30px"}},null,8,["label"]),n(q,{dense:"",flat:"",color:"primary",icon:"fast_forward",onClick:a[4]||(a[4]=l=>i(t).page=Math.min(i(t).numPages,i(t).page+1))})]))])]),s.value?(v(),P("div",Te,[n(N,{label:"Rating",modelValue:i(t).filter.Rt,"onUpdate:modelValue":a[5]||(a[5]=l=>i(t).filter.Rt=l),options:i(t).RtOptions,color:"accent"},null,8,["modelValue","options"]),n(N,{label:"Altitude",modelValue:i(t).filter.Alt,"onUpdate:modelValue":a[6]||(a[6]=l=>i(t).filter.Alt=l),options:i(t).AltOptions,color:"positive"},null,8,["modelValue","options"]),n(N,{label:"Type",modelValue:i(t).filter.C1,"onUpdate:modelValue":a[7]||(a[7]=l=>i(t).filter.C1=l),options:i(t).C1Options,color:"grey-7"},null,8,["modelValue","options"]),n(N,{label:"SubType",modelValue:i(t).filter.C2,"onUpdate:modelValue":a[8]||(a[8]=l=>i(t).filter.C2=l),options:i(t).C2Options,color:"grey-7"},null,8,["modelValue","options"]),n(N,{label:"Size",modelValue:i(t).filter.Sz,"onUpdate:modelValue":a[9]||(a[9]=l=>i(t).filter.Sz=l),options:i(t).SzOptions,color:"primary"},null,8,["modelValue","options"]),n(N,{label:"Brightness",modelValue:i(t).filter.Vz,"onUpdate:modelValue":a[10]||(a[10]=l=>i(t).filter.Vz=l),options:i(t).VzOptions,color:"primary"},null,8,["modelValue","options"])])):B("",!0),a[17]||(a[17]=k("div",{class:"row q-pb-sm q-col-gutter-md items-center"},null,-1)),k("div",Ue,[k("div",Ee,[n(Fe,{flat:"",bordered:"",class:"col"},{default:u(()=>[n(Pe,{bordered:"",separator:""},{default:u(()=>[i(t).paginated.length==0?(v(),w(J,{key:0,class:"q-pt-lg q-pb-lg"},{default:u(()=>[n(F,{avatar:""},{default:u(()=>[n(Z,{name:"mdi-help"})]),_:1}),n(F,null,{default:u(()=>[n(D,null,{default:u(()=>a[13]||(a[13]=[y("No Results Found",-1)])),_:1,__:[13]}),n(D,{caption:""},{default:u(()=>a[14]||(a[14]=[y("Clear the search and filters to try again",-1)])),_:1,__:[14]})]),_:1}),n(F,{side:""},{default:u(()=>[n(q,{flat:"",dense:"",icon:"mdi-close",label:"Clear",class:"position-right",onClick:a[11]||(a[11]=l=>i(t).clearFilter())})]),_:1})]),_:1})):(v(!0),P(xe,{key:1},ke(i(t).paginated,l=>(v(),w(J,{clickable:"",key:l.MainID,onClick:z=>I(l)},{default:u(()=>[n(F,{avatar:""},{default:u(()=>[n(Z,{name:f[l.C1]},null,8,["name"])]),_:2},1024),n(F,{top:""},{default:u(()=>[n(D,null,{default:u(()=>[k("span",Ge,b(l.MainID),1),l.OtherIDs?(v(),P("span",je,"   |   "+b(l.OtherIDs),1)):B("",!0)]),_:2},1024),n(D,{overline:""},{default:u(()=>[y(b(l.Name),1)]),_:2},1024),n(D,{caption:"",class:"text-grey-6"},{default:u(()=>[y(b(l.Subtype)+" in "+b(l.Constellation)+". "+b(l.Notes),1)]),_:2},1024),n(D,{caption:"",class:"text-grey-6"},{default:u(()=>[l.Class?(v(),P("span",Je,[y("Class: "+b(l.Class),1),n(G)])):B("",!0),y(" RA: "+b(i(le)(l.RA_hr,1,"hr"))+" ",1),n(G),y(" Dec: "+b(i(le)(l.Dec_deg))+" ",1),l.Az_deg?(v(),P("span",Ke,[n(G),y(" Az: "+b(i(ae)(l.Az_deg,"deg",0)),1)])):B("",!0),l.Alt_deg?(v(),P("span",He,[n(G),y(" Altitude: "+b(i(ae)(l.Alt_deg,"deg",0)),1)])):B("",!0)]),_:2},1024)]),_:2},1024),n(F,{top:"",side:"",class:"q-gutter-xs"},{default:u(()=>[n(D,{caption:""}),n(j,{dense:"",color:"accent",class:"text-caption"},{default:u(()=>[y(b(l.Rating),1)]),_:2},1024),l.Vz==7&&l.Sz==8?B("",!0):(v(),w(j,{key:0,dense:"",color:"primary",class:"text-caption"},{default:u(()=>[y(b(l.Visibility),1)]),_:2},1024)),l.Position?(v(),w(j,{key:1,dense:"",color:Q[l.Alt??2],class:"text-caption"},{default:u(()=>[y(b(l.Position),1)]),_:2},1032,["color"])):B("",!0)]),_:2},1024),n(F,{side:"",class:"q-gutter-xs"},{default:u(()=>[k("div",We,[n(q,{class:"gt-xs",flat:"",dense:"",icon:"mdi-move-resize-variant",onClick:ee(z=>V(l),["stop"])},{default:u(()=>[n(te,null,{default:u(()=>a[15]||(a[15]=[y("Goto",-1)])),_:1,__:[15]})]),_:2},1032,["onClick"]),n(q,{class:"gt-xs",flat:"",dense:"",icon:"mdi-sync",onClick:ee(z=>$(l),["stop"])},{default:u(()=>[n(te,null,{default:u(()=>a[16]||(a[16]=[y("Sync",-1)])),_:1,__:[16]})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])])]),_:1,__:[17]}))}});export{Pt as default};
