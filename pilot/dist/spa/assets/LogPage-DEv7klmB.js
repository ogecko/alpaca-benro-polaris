import{Q as z}from"./QBadge-CEiMBEzG.js";import{Q as T}from"./QSpace-CNxNcfvk.js";import{Q as U}from"./QBtnDropdown-B-U9vwsr.js";import{Q as u}from"./QToggle-BjVPQBy-.js";import{u as G,Q as M}from"./stream-C0qmnwB2.js";import{a0 as W,a1 as H,e as j,a as p,y as I,c as A,h as w,W as J,t as K,f as X,d as k,q as O,B as Y,E as C,F as b,J as r,I as s,X as c,H as h,z as Z,w as Q,N,K as D,O as B,a2 as oo,T as eo,S as to,P as so}from"./index-6oN2Ss7u.js";import{a as lo}from"./QScrollArea-CttfeiEJ.js";import{Q as $}from"./QCard-BAMmW1_C.js";import{Q as no}from"./QPage-Dra_ZGlU.js";import{Q as io}from"./QSelect-CC8EQpdb.js";import{u as ro}from"./config-58bzNq06.js";import{u as x}from"./device-C0bpDIxX.js";import{_ as ao}from"./StatusBanners.vue_vue_type_script_setup_true_lang-Cak4Kggr.js";import"./QBtnGroup-LrB8Dg7J.js";import"./QMenu-Br5LV4-c.js";import"./position-engine-D-DONQmr.js";import"./selection-ByMpo-0k.js";import"./focus-manager-DuIzoTHo.js";import"./scroll-Sehb0lii.js";import"./use-model-toggle-Dtaci0fA.js";import"./use-dark-gvinMmMG.js";import"./use-timeout-Be7HqWF5.js";import"./QItem-B1tDtJiC.js";import"./use-checkbox-BtAVy9p1.js";import"./status-DViR5SHd.js";import"./TouchPan-BRAIg3Y6.js";import"./touch-BjYP5sR0.js";import"./format-BvkBI9bc.js";import"./use-key-composition-DpSym2ZS.js";import"./QChip-Cwl6dyvg.js";import"./QItemLabel-JAuyYOVY.js";import"./use-prevent-scroll-D9dpmMsu.js";import"./rtl-DFPa-2ov.js";const V={threshold:0,root:null,rootMargin:"0px"};function R(e,o,l){let t,d,n;typeof l=="function"?(t=l,d=V,n=o.cfg===void 0):(t=l.handler,d=Object.assign({},V,l.cfg),n=o.cfg===void 0||H(o.cfg,d)===!1),o.handler!==t&&(o.handler=t),n===!0&&(o.cfg=d,o.observer?.unobserve(e),o.observer=new IntersectionObserver(([a])=>{if(typeof o.handler=="function"){if(a.rootBounds===null&&document.body.contains(e)===!0){o.observer.unobserve(e),o.observer.observe(e);return}(o.handler(a,o.observer)===!1||o.once===!0&&a.isIntersecting===!0)&&E(e)}},d),o.observer.observe(e))}function E(e){const o=e.__qvisible;o!==void 0&&(o.observer?.unobserve(e),delete e.__qvisible)}const co=W({name:"intersection",mounted(e,{modifiers:o,value:l}){const t={once:o.once===!0};R(e,t,l),e.__qvisible=t},updated(e,o){const l=e.__qvisible;l!==void 0&&R(e,l,o.value)},beforeUnmount:E}),uo=j({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:o,emit:l}){const t=p(I.value===!0?e.ssrPrerender:!1),d=A(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:v,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:v),n=A(()=>e.disable!==!0&&(I.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),a=A(()=>[[co,d.value,void 0,{once:e.once}]]),g=A(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function v(f){t.value!==f.isIntersecting&&(t.value=f.isIntersecting,e.onVisibility!==void 0&&l("visibility",t.value))}function _(){if(t.value===!0)return[w("div",{key:"content",style:g.value},X(o.default))];if(o.hidden!==void 0)return[w("div",{key:"hidden",style:g.value},o.hidden())]}return()=>{const f=e.transition?[w(J,{name:"q-transition--"+e.transition},_)]:_();return K(e.tag,{class:"q-intersection"},f,"main",n.value,()=>a.value)}}}),mo={class:"row q-mb-md"},go={class:"q-gutter-y-sm"},fo={class:"row"},vo={class:"row"},_o={class:"row"},po={class:"row"},bo={class:"row"},ho={class:"row"},yo={class:"row"},So=k({__name:"LogSettings",setup(e){const o=x(),l=ro();O(async()=>{o.restAPIConnected&&o.restAPIConnectedAt&&l.fetchedAt<o.restAPIConnectedAt&&await l.configFetch()});function t(n,a,g){const v=l[n],_=typeof v,f=["string","number","boolean"].includes(_);return{label:a,modelValue:f?v:"","onUpdate:modelValue":y=>{if(y!==null&&f){l[n]=y;const S={[n]:y};d(S)}}}}const d=Y(n=>l.configUpdate(n),5);return(n,a)=>(h(),C($,{flat:"",bordered:"",class:"q-pa-md"},{default:b(()=>[a[0]||(a[0]=r("div",{class:"text-h6"},"Protocol Log Settings",-1)),a[1]||(a[1]=r("div",{class:"row"},[r("div",{class:"col-12 text-caption text-grey-6 q-pb-md"}," Select which messages to log, such as those from Alpaca clients (NINA, CCDciel, Pilot), SynScan apps (Stellarium), and the messages sent to the Benro Polaris. ")],-1)),r("div",mo,[s(io,c({class:"col-12 q-pb-md",filled:""},t("log_level","Log Detail and Verbosity Level"),{options:[{label:"DEBUG – Detailed diagnostic logs",value:"DEBUG"},{label:"INFO – Default routine logging information",value:"INFO"},{label:"WARNING – Only log unexpected issues and above",value:"WARNING"},{label:"ERROR – Only log serious functional problems",value:"ERROR"},{label:"CRITICAL – Only log fatal system errors",value:"CRITICAL"}],"emit-value":"","map-options":""}),null,16)]),r("div",go,[r("div",fo,[s(u,c({class:"col-6"},t("log_alpaca_protocol","Log Alpaca Protocol")),null,16),s(u,c({class:"col-6"},t("log_alpaca_polling","Log Alpaca Polling")),null,16)]),r("div",vo,[s(u,c({class:"col-6"},t("log_alpaca_discovery","Log Alpaca Discovery")),null,16),s(u,c({class:"col-6"},t("log_alpaca_actions","Log Action Invokation")),null,16)]),r("div",_o,[s(u,c({class:"col-6"},t("log_rotator_protocol","Log Rotator Protocol")),null,16),s(u,c({class:"col-6"},t("log_pulse_guiding","Log Pulse Guiding")),null,16)]),r("div",po,[s(u,c({class:"col-6"},t("log_synscan_protocol","Log SynSCAN Protocol")),null,16),s(u,c({class:"col-6"},t("log_synscan_polling","Log SynSCAN Polling")),null,16)]),r("div",bo,[s(u,c({class:"col-6"},t("log_polaris_protocol","Log Benro Polaris Protocol")),null,16),s(u,c({class:"col-6"},t("log_polaris_polling","Log Benro Polaris Polling")),null,16)]),r("div",ho,[s(u,c({class:"col-6"},t("log_polaris_ble","Log Bluetooth Low Energy")),null,16),s(u,c({class:"col-6"},t("log_quest_model","Log Multi-Point Sync")),null,16)]),r("div",yo,[s(u,c({class:"col-6"},t("log_orbital_queries","Log Orbital Queries")),null,16)])])]),_:1,__:[0,1]}))}}),Po={class:"row q-pb-sm q-col-gutter-md items-center"},Ao={class:"col text-h6 q-ml-md"},Lo={key:1,class:"text-caption text-grey-6"},qo={class:"q-gutter-md flex justify-end q-mr-md"},ne=k({__name:"LogPage",setup(e){const o=G(),l=x(),t=A(()=>o.topics.log||[]),d=p(!0),n=p(!0),a=p(null),g=p(null),v=p(0);O(()=>{o.connectSocket(),o.subscribe("log"),S()}),Z(()=>{o.unsubscribe("log")}),Q(()=>l.isVisible,i=>{i?o.subscribe("log"):o.unsubscribe("log")});function _(i){v.value=i.height-50}function f(i){const m=i.ts||"",P=i.level||"",q="text"in i.data?i.data.text:JSON.stringify(i.data);return`[${m}] [${P}] ${q}`}function y(i){d.value=i}function S(){if(!g.value)return;const i=g.value.getScroll(),m=i.verticalSize-i.verticalContainerSize;g.value.setScrollPosition("vertical",m,200)}function L(){n.value=!1}function F(){n.value&&S()}return Q(n,i=>{i&&S()}),(i,m)=>(h(),C(no,{class:"q-pa-sm column"},{default:b(()=>[s(ao),r("div",Po,[r("div",Ao,[m[2]||(m[2]=N(" Alpaca Driver Log ",-1)),d.value?(h(),C(z,{key:0,size:"lg",color:"primary"},{default:b(()=>m[1]||(m[1]=[N("Live",-1)])),_:1,__:[1]})):D("",!0),i.$q.screen.gt.xs?(h(),B("div",Lo," Monitor device status, activity, communications, and events in real time ")):D("",!0)]),s(T),r("div",qo,[s(U,{rounded:"",color:"grey-9",label:"Log Settings","content-style":{width:"600px"}},{default:b(()=>[s(So)]),_:1}),s(u,{dense:"",label:"Live",modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=P=>n.value=P)},null,8,["modelValue"])])]),s($,{ref_key:"cardArea",ref:a,flat:"",bordered:"",class:"col full-height q-pa-md text-body1",style:{"font-family":"monospace"}},{default:b(()=>[s(M,{onResize:_}),s(lo,{ref_key:"scrollArea",ref:g,onScroll:F,style:oo({height:v.value+"px"}),onWheel:L,onClick:L,onPointerdown:L},{default:b(()=>[r("div",null,[(h(!0),B(to,null,eo(t.value,(P,q)=>(h(),B("div",{key:q},so(f(P)),1))),128)),s(uo,{onVisibility:y})])]),_:1},8,["style"])]),_:1},512)]),_:1}))}});export{ne as default};
